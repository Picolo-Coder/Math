<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand"><h1>Winkpπdia</h1></a>
            <div class="sub">
                <h1>___</h1>
                <h1>pi</h1>
            </div>
            <i class="bi bi-book-half" id="a"></i>
        </div>
        <div class="btn-group" role="group" aria-label="Basic example">
            <a href="#Geo-container" class="btn btn-primary" id="btnGeometria">Geometria</a>
            <a href="#Algebre-container" class="btn btn-primary" id="btnAlgebra">Álgebra</a>
            <a href="#Aritmetica-container" class="btn btn-primary" id="btnAritmetica">Aritmética</a>
            <a href="#Trigonometria-container" class="btn btn-primary" id="btnTrigonometria">Trigonometria</a>
            <a href="#Combina-container" class="btn btn-primary" id="btnCombinatoria">Combinatória</a>
        </div>
    </nav>

    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active"  data-bs-interval="4000">
                <img src="images/banner.avif" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item" data-bs-interval="8000">
                <img src="images/banner.avif" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="images/banner.avif" class="d-block w-100" alt="...">
            </div>
        </div>
    </div>

    <div class="conj">
        <button class="guia">
            <a href="add.html">Cadastrar Novo Item</a>
        </button>
        <form class="d-flex" role="search" id="searchForm">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchInput">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
    </div>

    <main>
        <div id="Geo-container" class="content-container"></div>
        <div id="Algebre-container" class="content-container"></div>
        <div id="Aritmetica-container" class="content-container"></div>
        <div id="Trigonometria-container" class="content-container"></div>
        <div id="Combina-container" class="content-container"></div>
    </main>

    <script>
        let geometriaData = [];
        let algebraData = [];
        let aritmeticaData = [];
        let trigonometriaData = [];
        let combinatoriaData = [];

        // Função para carregar os dados de Geometria
        async function loadGeometriaData() {
            try {
                const response = await fetch('http://127.0.0.1:3000/api/geometria');
                if (!response.ok) {
                    throw new Error('Erro ao buscar dados');
                }
                geometriaData = await response.json();
                displayData(geometriaData, 'Geo-container');
            } catch (error) {
                console.error('Erro ao carregar dados da Geometria:', error);
                document.getElementById('Geo-container').innerHTML = '<p>Erro ao carregar dados.</p>';
            }
        }

        // Função para carregar os dados de Álgebra
        async function loadAlgebraData() {
            try {
                const response = await fetch('http://127.0.0.1:3000/api/algebra');
                if (!response.ok) {
                    throw new Error('Erro ao buscar dados');
                }
                algebraData = await response.json();
                displayData(algebraData, 'Algebre-container');
            } catch (error) {
                console.error('Erro ao carregar dados da Álgebra:', error);
                document.getElementById('Algebre-container').innerHTML = '<p>Erro ao carregar dados.</p>';
            }
        }

        // Função para carregar os dados de Aritmética
        async function loadAritmeticaData() {
            try {
                const response = await fetch('http://127.0.0.1:3000/api/aritmetica');
                if (!response.ok) {
                    throw new Error('Erro ao buscar dados');
                }
                aritmeticaData = await response.json();
                displayData(aritmeticaData, 'Aritmetica-container');
            } catch (error) {
                console.error('Erro ao carregar dados da Aritmética:', error);
                document.getElementById('Aritmetica-container').innerHTML = '<p>Erro ao carregar dados.</p>';
            }
        }

        // Função para carregar os dados de Trigonometria
        async function loadTrigonometriaData() {
            try {
                const response = await fetch('http://127.0.0.1:3000/api/trigonometria');
                if (!response.ok) {
                    throw new Error('Erro ao buscar dados');
                }
                trigonometriaData = await response.json();
                displayData(trigonometriaData, 'Trigonometria-container');
            } catch (error) {
                console.error('Erro ao carregar dados da Trigonometria:', error);
                document.getElementById('Trigonometria-container').innerHTML = '<p>Erro ao carregar dados.</p>';
            }
        }

        // Função para carregar os dados de Combinatória
        async function loadCombinatoriaData() {
            try {
                const response = await fetch('http://127.0.0.1:3000/api/combinatoria');
                if (!response.ok) {
                    throw new Error('Erro ao buscar dados');
                }
                combinatoriaData = await response.json();
                displayData(combinatoriaData, 'Combina-container');
            } catch (error) {
                console.error('Erro ao carregar dados da Combinatória:', error);
                document.getElementById('Combina-container').innerHTML = '<p>Erro ao carregar dados.</p>';
            }
        }

        // Função para exibir os dados filtrados
        function displayData(data, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            if (data.length > 0) {
                data.forEach(item => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    const title = `<h3>${item.titulo}</h3>`;
                    const description = `<p>${item.definicao}</p>`;
                    card.innerHTML = title + description;
                    container.appendChild(card);
                });
            }
        }

        // Função de filtro de pesquisa
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            const filteredGeometria = geometriaData.filter(item => item.titulo.toLowerCase().includes(searchTerm));
            displayData(filteredGeometria, 'Geo-container');
            
            const filteredAlgebra = algebraData.filter(item => item.titulo.toLowerCase().includes(searchTerm));
            displayData(filteredAlgebra, 'Algebre-container');
            
            const filteredAritmetica = aritmeticaData.filter(item => item.titulo.toLowerCase().includes(searchTerm));
            displayData(filteredAritmetica, 'Aritmetica-container');
            
            const filteredTrigonometria = trigonometriaData.filter(item => item.titulo.toLowerCase().includes(searchTerm));
            displayData(filteredTrigonometria, 'Trigonometria-container');
            
            const filteredCombinatoria = combinatoriaData.filter(item => item.titulo.toLowerCase().includes(searchTerm));
            displayData(filteredCombinatoria, 'Combina-container');
        }

        // Adicionando evento para pesquisa
        document.getElementById('searchInput').addEventListener('input', filterData);

        // Função para mostrar ou esconder os containers conforme o link clicado
        function showContainer(containerId) {
            const containers = document.querySelectorAll('.content-container');
            containers.forEach(container => {
                if (container.id === containerId) {
                    container.style.display = 'block';
                } else {
                    container.style.display = 'none';
                }
            });
        }

        // Inicializar
        loadGeometriaData();
        loadAlgebraData();
        loadAritmeticaData();
        loadTrigonometriaData();
        loadCombinatoriaData();
    </script>
</body>
</html>
